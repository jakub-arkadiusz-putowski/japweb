<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kalendarz z notatkami</title>
    <style>
        /* Prosty styl kalendarza */
        .c-cal__container {
            display: flex;
            flex-direction: column;
            align-items: center;
            font-family: Arial, sans-serif;
            margin-top: 20px;
        }
        .c-cal__row {
            display: flex;
            width: 100%;
            justify-content: center;
        }
        .c-cal__col, .c-cal__cel {
            width: 40px;
            height: 40px;
            display: flex;
            justify-content: center;
            align-items: center;
            border: 1px solid #ccc;
            margin: 2px;
        }
        .c-cal__cel {
            cursor: pointer;
            background-color: #f9f9f9;
        }
        .c-cal__cel:hover {
            background-color: #e0e0e0;
        }
        h1 {
            text-align: center;
        }
        .note-container {
            margin-top: 20px;
            border: 1px solid #ccc;
            padding: 10px;
            width: 300px;
        }
        .note-container h2 {
            margin-top: 0;
        }
        .note {
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <h1>Kalendarz z notatkami</h1>
    <div class="c-cal__container" id="calendar"></div>

    <div class="note-container" id="note-container">
        <h2>Notatki</h2>
        <div id="note-list">Kliknij na dzień, aby zobaczyć notatki.</div>
        <form id="note-form" style="display: none; margin-top: 10px;">
            <textarea id="note-input" placeholder="Dodaj notatkę" rows="3" style="width: 100%;"></textarea>
            <button type="button" id="save-note" style="margin-top: 10px;">Zapisz</button>
        </form>
    </div>

    <script>
        const notes = {}; // Obiekt do przechowywania notatek { "2022-01-01": ["Note 1", "Note 2"] }

        function createDayTitle(dayName) {
            const dayDiv = document.createElement('div');
            dayDiv.classList.add('c-cal__col');
            dayDiv.textContent = dayName;
            return dayDiv;
        }

        function createDayCell(day, fullDate) {
            const dayDiv = document.createElement('div');
            dayDiv.classList.add('c-cal__cel');
            dayDiv.textContent = day;
            dayDiv.dataset.date = fullDate;

            dayDiv.addEventListener('click', () => {
                showNotes(fullDate);
            });

            return dayDiv;
        }

        function fillCalendar(month, monthLength, monthIndex, startDay) {
            const container = document.getElementById('calendar');

            // Tworzenie nagłówka miesiąca
            const monthHeader = document.createElement('h2');
            monthHeader.textContent = month;
            container.appendChild(monthHeader);

            // Tworzenie nagłówka dni tygodnia
            const daysRow = document.createElement('div');
            daysRow.classList.add('c-cal__row');
            ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'].forEach(dayName => {
                daysRow.appendChild(createDayTitle(dayName));
            });
            container.appendChild(daysRow);

            // Tworzenie dni w miesiącu
            let currentRow = document.createElement('div');
            currentRow.classList.add('c-cal__row');

            // Wypełnienie pustych komórek przed pierwszym dniem
            for (let i = 1; i < startDay; i++) {
                const emptyCell = document.createElement('div');
                emptyCell.classList.add('c-cal__cel');
                currentRow.appendChild(emptyCell);
            }

            // Wypełnienie dni miesiąca
            for (let day = 1; day <= monthLength; day++) {
                const fullDate = `2022-${monthIndex}-${day.toString().padStart(2, '0')}`;
                currentRow.appendChild(createDayCell(day, fullDate));
                if ((startDay + day - 1) % 7 === 0 || day === monthLength) {
                    container.appendChild(currentRow);
                    currentRow = document.createElement('div');
                    currentRow.classList.add('c-cal__row');
                }
            }
        }

        function generateCalendar(year) {
            // Definicja miesięcy i ich długości
            const months = [
                { name: 'January', days: 31 },
                { name: 'February', days: (year % 4 === 0 && (year % 100 !== 0 || year % 400 === 0)) ? 29 : 28 },
                { name: 'March', days: 31 },
                { name: 'April', days: 30 },
                { name: 'May', days: 31 },
                { name: 'June', days: 30 },
                { name: 'July', days: 31 },
                { name: 'August', days: 31 },
                { name: 'September', days: 30 },
                { name: 'October', days: 31 },
                { name: 'November', days: 30 },
                { name: 'December', days: 31 }
            ];

            let startDay = new Date(`${year}-01-01`).getDay() + 1;

            months.forEach((month, index) => {
                fillCalendar(month.name, month.days, (index + 1).toString().padStart(2, '0'), startDay);
                startDay = (startDay + month.days) % 7 || 7;
            });
        }

        function showNotes(date) {
            const noteList = document.getElementById('note-list');
            const noteForm = document.getElementById('note-form');
            const noteInput = document.getElementById('note-input');
            const saveNoteButton = document.getElementById('save-note');

            noteList.innerHTML = ''; // Czyść listę notatek
            const notesForDate = notes[date] || [];
            notesForDate.forEach(note => {
                const noteDiv = document.createElement('div');
                noteDiv.classList.add('note');
                noteDiv.textContent = note;
                noteList.appendChild(noteDiv);
            });

            // Pokaż formularz dodawania notatek
            noteForm.style.display = 'block';
            noteInput.value = ''; // Wyczyszczenie pola tekstowego

            saveNoteButton.onclick = () => {
                const noteText = noteInput.value.trim();
                if (noteText) {
                    notes[date] = notes[date] || [];
                    notes[date].push(noteText);
                    showNotes(date); // Odśwież widok notatek
                }
            };
        }

        // Wygenerowanie kalendarza na rok 2022
        generateCalendar(2022);
    </script>
</body>
</html>
