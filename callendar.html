<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kalendarz z notatkami</title>
    <style>
        /* Styl kalendarza */
        .c-cal__container {
            display: flex;
            flex-direction: column;
            align-items: center;
            font-family: Arial, sans-serif;
            margin-top: 20px;
        }
        .c-cal__row {
            display: flex;
            width: 100%;
            justify-content: center;
        }
        .c-cal__col, .c-cal__cel {
            width: 40px;
            height: 40px;
            display: flex;
            justify-content: center;
            align-items: center;
            border: 1px solid #ccc;
            margin: 2px;
            position: relative;
        }
        .c-cal__cel {
            cursor: pointer;
            background-color: #f9f9f9;
        }
        .c-cal__cel:hover {
            background-color: #e0e0e0;
        }
        .c-cal__cel.has-notes::after {
            content: "ðŸŒŸ";
            position: absolute;
            bottom: 2px;
            right: 2px;
            font-size: 14px;
        }
        h1 {
            text-align: center;
        }
        .note-container {
            margin-top: 20px;
            border: 1px solid #ccc;
            padding: 10px;
            width: 300px;
        }
        .note-container h2 {
            margin-top: 0;
        }
        .note {
            margin-bottom: 10px;
        }
        .note button {
            margin-left: 10px;
            font-size: 12px;
        }
        .summary-container {
            margin-top: 20px;
            border: 1px solid #ccc;
            padding: 10px;
            width: 300px;
        }
        .summary-container h2 {
            margin-top: 0;
        }
    </style>
</head>
<body>
    <h1>Kalendarz z notatkami - 2024</h1>
    <div class="c-cal__container" id="calendar"></div>

    <div class="note-container" id="note-container">
        <h2>Notatki</h2>
        <div id="note-list">Kliknij na dzieÅ„, aby zobaczyÄ‡ notatki.</div>
        <form id="note-form" style="display: none; margin-top: 10px;">
            <textarea id="note-input" placeholder="Dodaj lub edytuj notatkÄ™" rows="3" style="width: 100%;"></textarea>
            <button type="button" id="save-note" style="margin-top: 10px;">Zapisz</button>
        </form>
    </div>

    <div class="summary-container" id="summary-container">
        <h2>Dni z notatkami</h2>
        <ul id="note-summary">Brak dni z notatkami.</ul>
    </div>

    <script>
        const notes = {}; // Obiekt przechowujÄ…cy notatki w formacie { "2024-01-01": ["Note 1", "Note 2"] }

        function createDayTitle(dayName) {
            const dayDiv = document.createElement('div');
            dayDiv.classList.add('c-cal__col');
            dayDiv.textContent = dayName;
            return dayDiv;
        }

        function createDayCell(day, fullDate) {
            const dayDiv = document.createElement('div');
            dayDiv.classList.add('c-cal__cel');
            dayDiv.textContent = day;
            dayDiv.dataset.date = fullDate;

            // Sprawdzenie, czy dzieÅ„ ma notatki
            if (notes[fullDate] && notes[fullDate].length > 0) {
                dayDiv.classList.add('has-notes');
            }

            dayDiv.addEventListener('click', () => {
                showNotes(fullDate);
            });

            return dayDiv;
        }

        function fillCalendar(month, monthLength, monthIndex, startDay) {
            const container = document.getElementById('calendar');

            // Tworzenie nagÅ‚Ã³wka miesiÄ…ca
            const monthHeader = document.createElement('h2');
            monthHeader.textContent = month;
            container.appendChild(monthHeader);

            // Tworzenie nagÅ‚Ã³wka dni tygodnia
            const daysRow = document.createElement('div');
            daysRow.classList.add('c-cal__row');
            ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'].forEach(dayName => {
                daysRow.appendChild(createDayTitle(dayName));
            });
            container.appendChild(daysRow);

            // Tworzenie dni w miesiÄ…cu
            let currentRow = document.createElement('div');
            currentRow.classList.add('c-cal__row');

            // WypeÅ‚nienie pustych komÃ³rek przed pierwszym dniem
            for (let i = 1; i < startDay; i++) {
                const emptyCell = document.createElement('div');
                emptyCell.classList.add('c-cal__cel');
                currentRow.appendChild(emptyCell);
            }

            // WypeÅ‚nienie dni miesiÄ…ca
            for (let day = 1; day <= monthLength; day++) {
                const fullDate = `2024-${monthIndex}-${day.toString().padStart(2, '0')}`;
                currentRow.appendChild(createDayCell(day, fullDate));
                if ((startDay + day - 1) % 7 === 0 || day === monthLength) {
                    container.appendChild(currentRow);
                    currentRow = document.createElement('div');
                    currentRow.classList.add('c-cal__row');
                }
            }
        }

        function updateSummary() {
            const summaryList = document.getElementById('note-summary');
            summaryList.innerHTML = '';

            const datesWithNotes = Object.keys(notes).filter(date => notes[date].length > 0);

            if (datesWithNotes.length === 0) {
                summaryList.textContent = 'Brak dni z notatkami.';
                return;
            }

            datesWithNotes.forEach(date => {
                const listItem = document.createElement('li');
                listItem.textContent = `${date}: ${notes[date].join(', ')}`;
                summaryList.appendChild(listItem);
            });
        }

        function showNotes(date) {
            const noteList = document.getElementById('note-list');
            const noteForm = document.getElementById('note-form');
            const noteInput = document.getElementById('note-input');
            const saveNoteButton = document.getElementById('save-note');

            noteList.innerHTML = ''; // CzyÅ›Ä‡ listÄ™ notatek
            const notesForDate = notes[date] || [];
            notesForDate.forEach((note, index) => {
                const noteDiv = document.createElement('div');
                noteDiv.classList.add('note');
                noteDiv.textContent = note;

                const editButton = document.createElement('button');
                editButton.textContent = 'Edytuj';
                editButton.onclick = () => {
                    noteInput.value = note;
                    notes[date].splice(index, 1);
                };

                const deleteButton = document.createElement('button');
                deleteButton.textContent = 'UsuÅ„';
                deleteButton.onclick = () => {
                    notes[date].splice(index, 1);
                    if (notes[date].length === 0) {
                        delete notes[date];
                    }
                    showNotes(date);
                    updateSummary();
                };

                noteDiv.appendChild(editButton);
                noteDiv.appendChild(deleteButton);
                noteList.appendChild(noteDiv);
            });

            noteForm.style.display = 'block';
            noteInput.value = '';

            saveNoteButton.onclick = () => {
                const noteText = noteInput.value.trim();
                if (noteText) {
                    notes[date] = notes[date] || [];
                    notes[date].push(noteText);
                    showNotes(date);
                    updateSummary();
                }
            };
        }

        function generateCalendar(year) {
            // Definicja miesiÄ™cy i ich dÅ‚ugoÅ›ci
            const months = [
                { name: 'January', days: 31 },
                { name: 'February', days: (year % 4 === 0 && (year % 100 !== 0 || year % 400 === 0)) ? 29 : 28 },
                { name: 'March', days: 31 },
                { name: 'April', days: 30 },
                { name: 'May', days: 31 },
                { name: 'June', days: 30 },
                { name: 'July', days: 31 },
                { name: 'August', days: 31 },
                { name: 'September', days: 30 },
                { name: 'October', days: 31 },
                { name: 'November', days: 30 },
                { name: 'December', days: 31 }
            ];

            let startDay = new Date(`${year}-01-01`).getDay() + 1;

            months.forEach((month, index) => {
                fillCalendar(month.name, month.days, (index + 1).toString().padStart(2, '0'), startDay);
                startDay = (startDay + month.days) % 7 || 7;
            });
        }

        // Wygenerowanie kalendarza na rok 2024
        generateCalendar(2024);
    </script>
</body>
</html>
